import matplotlib.pyplot as plt
import numpy as np

import sys
import os

# Aggiungi la cartella principale del progetto al PYTHONPATH
project_root = '/Users/manuelemustari/Desktop/Università/Politecnico di Torino/2° year/2° period/Football-Tactical-AI'
sys.path.append(project_root)
from RLmodel.ball import Ball

def test_ball_motion():
    # Create ball instance
    ball = Ball()

    # Set initial velocity (simulating a pass or shot)
    ball.velocity = np.array([30.0, 30.0])  # Set initial velocity for the ball
    ball.init_position = [0, 0]

    # Set up the plot
    _, ax = plt.subplots(figsize=(12, 8))
    ax.set_xlim(0, 120)
    ax.set_ylim(0, 80)

    # Track the ball's movement over time
    ball_positions = []

    # Simulate for a few frames
    for _ in range(24):  # Run for 24 frames
        ball.update_position()  # Update ball position

        # Store the ball's position
        ball_positions.append(ball.get_position())

        # Plot the ball's position
        ax.clear()
        ax.set_xlim(0, 120)
        ax.set_ylim(0, 80)
        ax.plot(ball.get_position()[0], ball.get_position()[1], 'o', color='blue', markersize=10)  # Plot ball
        plt.pause(0.1)  # Pause for visualization (to simulate real-time update)

    plt.show()

# Run the test
test_ball_motion()